// Code generated by ent-elastic, DO NOT EDIT.

package {{.PkgName}}

import (
    "encoding/json"
    "github.com/olivere/elastic/v7"
    "time"
)

type {{.Schema.Name}} struct {
    {{range .Schema.Fields}}
    {{ToCamelCase .Name}} {{Type .}} `json:"{{.Name}},omitempty"`
    {{end}}
}

func Unserizer{{.Schema.Name}}(result *elastic.SearchResult) ([]*{{.Schema.Name}}, int, error) {
	datas := make([]*{{.Schema.Name}}, 0)
	for _, h := range result.Hits.Hits {
		data := &{{.Schema.Name}}{}
		err := json.Unmarshal(h.Source, data)
		if err != nil {
			return nil, 0, err
		}

		datas = append(datas, data)
	}

	return datas, int(result.Hits.TotalHits.Value), nil
}